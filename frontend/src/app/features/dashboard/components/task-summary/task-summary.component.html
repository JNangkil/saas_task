<section class="task-summary" *ngIf="summary as data">
  <header class="task-summary__header">
    <h2>{{ heading }}</h2>
    <span class="task-summary__total">{{ totalTrackedTasks() }} tasks tracked</span>
  </header>

  <div class="task-summary__cards">
    <article class="task-summary__card task-summary__card--alert">
      <span class="task-summary__card-label">Overdue</span>
      <strong class="task-summary__card-value">{{ data.overdue }}</strong>
      <span class="task-summary__card-meta">{{ percentage(data.overdue) }}% of active work</span>
    </article>

    <article class="task-summary__card">
      <span class="task-summary__card-label">Due today</span>
      <strong class="task-summary__card-value">{{ data.dueToday }}</strong>
      <span class="task-summary__card-meta">Give these visibility</span>
    </article>

    <article class="task-summary__card">
      <span class="task-summary__card-label">Due soon</span>
      <strong class="task-summary__card-value">{{ data.dueSoon }}</strong>
      <span class="task-summary__card-meta">Within the next 7 days</span>
    </article>

    <article class="task-summary__card task-summary__card--success">
      <span class="task-summary__card-label">Completed this week</span>
      <strong class="task-summary__card-value">{{ data.completedThisWeek }}</strong>
      <span class="task-summary__card-meta">Keep the pace up</span>
    </article>
  </div>

  <div class="task-summary__breakdowns">
    <div class="task-summary__breakdown">
      <h3>Status breakdown</h3>
      <ul>
        <li *ngFor="let item of data.statusBreakdown">
          <div class="task-summary__breakdown-row">
            <span>{{ item.label }}</span>
            <span>{{ item.count }}</span>
          </div>
          <div class="task-summary__progress">
            <div
              class="task-summary__progress-bar"
              [class]="item.tone"
              [style.width.%]="percentage(item.count)"
            ></div>
          </div>
        </li>
      </ul>
    </div>

    <div class="task-summary__breakdown">
      <h3>Priority focus</h3>
      <ul>
        <li *ngFor="let item of data.priorityBreakdown">
          <div class="task-summary__breakdown-row">
            <span>{{ item.label }}</span>
            <span>{{ item.count }}</span>
          </div>
          <div class="task-summary__progress">
            <div
              class="task-summary__progress-bar"
              [class]="item.tone"
              [style.width.%]="percentage(item.count)"
            ></div>
          </div>
        </li>
      </ul>
    </div>
  </div>
</section>
